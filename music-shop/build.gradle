plugins {
    id "io.spring.dependency-management" version "1.0.8.RELEASE"
    id "org.springframework.boot" version "2.2.2.RELEASE"
}

allprojects {
    group = 'com.epam.brest.summer.courses2019'
    version = '1.0-SNAPSHOT'
}

repositories {
    mavenLocal()
    jcenter()
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'java-library'
    apply plugin: 'idea'
    apply plugin: 'jacoco'
    apply plugin: 'maven-publish'
    apply plugin: 'io.spring.dependency-management'

    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8

    repositories {
        mavenLocal()
        jcenter()
    }

    dependencyManagement {
        imports {
            mavenBom "org.springframework.boot:spring-boot-dependencies:2.2.2.RELEASE"
        }
    }

    dependencies {
        implementation 'org.springframework.boot:spring-boot-starter'
        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        implementation 'org.springframework.boot:spring-boot-starter-webflux'
        implementation 'org.projectreactor:reactor-spring:1.0.1.RELEASE'

        runtimeOnly 'com.h2database:h2:1.4.199'
        runtimeOnly 'io.r2dbc:r2dbc-h2:0.8.2.RELEASE'
        runtimeOnly 'io.r2dbc:r2dbc-pool:0.8.2.RELEASE'

        testImplementation ('org.springframework.boot:spring-boot-starter-test')
    }

    publishing {
        publications {
            maven(MavenPublication) {
                from(components.java)
            }
        }
    }

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}